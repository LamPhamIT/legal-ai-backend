  // =========================
  // Prisma Client
  // =========================
  generator client {
    provider = "prisma-client-js"
  }

  // =========================
  // Database
  // =========================
  datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
  }

  // =========================
  // WORKFLOW 1: AI REGULATORY SCOUT
  // =========================
  model Law {
    id               Int      @id @default(autoincrement())
    
    title            String   @db.Text
    lawType          String   
    issuingBody      String   
    
    summary          String   @db.Text 
    affectedEntities String[] 
    keyChanges       String[] 
    
    riskLevel        RiskLevel
    effectiveDate    DateTime
    
    sourceUrl        String
    pdfUrl           String? 

    createdAt        DateTime @default(now())

    // Relations
    contracts        Contract[]
  }

 model Contract {
  id               Int            @id @default(autoincrement())
  
  title            String        
  contractType     String       
  
  partnerName      String       
  partnerTaxCode   String?        
  
  contractValue    Float
  currency         String         @default("VND")
  
  content          String         @db.Text 
  documentUrl      String?       
  
  riskScore        Int            @default(0) 
  riskNote         String?        @db.Text 
  riskAssessment   Json?          
  
  status           ContractStatus @default(DRAFT)
  signedAt         DateTime?
  createdAt        DateTime       @default(now())

  // Relations
  lawId            Int?           
  law              Law?           @relation(fields: [lawId], references: [id])
  complianceTasks  ComplianceTask[]
}

  // =========================
  // WORKFLOW 3: AI COMPLIANCE GUARDIAN
  // =========================
  model ComplianceTask {
    id               Int      @id @default(autoincrement())
    
    title            String  
    description      String?  @db.Text
    
    deadline         DateTime
    status           TaskStatus @default(PENDING)
    
    evidenceUrl      String? 

    createdAt        DateTime @default(now())
    completedAt      DateTime?

    // Relations
    contractId       Int
    contract         Contract @relation(fields: [contractId], references: [id])
  }

  // =========================
  // ENUMS
  // =========================
  enum RiskLevel {
    LOW
    MEDIUM
    HIGH
  }

  enum ContractStatus {
    DRAFT
    SIGNED
    CANCELLED
  }

  enum TaskStatus {
    PENDING
    COMPLETED
    OVERDUE
  }